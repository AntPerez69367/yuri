/* Auto-generated by cbindgen - DO NOT EDIT */

#ifndef YURI_RS_H
#define YURI_RS_H

#pragma once

/* Warning: This file is auto-generated by cbindgen. */
/* Any manual edits will be overwritten. */

#include <stdarg.h>
#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>

/**
 * Maximum number of meta files that can be loaded
 */
#define META_MAX 20

/**
 * Maximum number of towns supported
 */
#define TOWN_MAX 255

/**
 * Server tick rate in nanoseconds (10ms = 10,000,000 ns)
 * This controls how fast the main server loop runs
 */
#define SERVER_TICK_RATE_NS 10000000

typedef struct Option_CTermFunc Option_CTermFunc;

/**
 * A point in 3D space (map, x, y)
 *
 * This matches the C struct exactly due to #[repr(C)]
 */
typedef struct Point {
  uint16_t m;
  uint16_t x;
  uint16_t y;
} Point;

/**
 * Load configuration from file (C-compatible entry point)
 *
 * # Safety
 * - `cfg_file` must be a valid null-terminated C string
 * - The pointer must remain valid for the duration of the call
 *
 * Returns 0 on success, -1 on failure
 */
int rust_config_read(const char *cfg_file);

/**
 * Get SQL IP address (returns pointer to static string)
 */
const char *rust_config_get_sql_ip(void);

/**
 * Get SQL port
 */
uint16_t rust_config_get_sql_port(void);

/**
 * Get SQL username
 */
const char *rust_config_get_sql_id(void);

/**
 * Get SQL password
 */
const char *rust_config_get_sql_pw(void);

/**
 * Get SQL database name
 */
const char *rust_config_get_sql_db(void);

/**
 * Get map IP address (as u32 for compatibility with C's inet_addr format)
 */
uint32_t rust_config_get_map_ip(void);

/**
 * Get map port
 */
uint16_t rust_config_get_map_port(void);

/**
 * Get char server IP (as u32)
 */
uint32_t rust_config_get_char_ip(void);

/**
 * Get char server port
 */
uint16_t rust_config_get_char_port(void);

/**
 * Get login server IP (as u32)
 */
uint32_t rust_config_get_login_ip(void);

/**
 * Get login server port
 */
uint16_t rust_config_get_login_port(void);

/**
 * Get XOR encryption key
 */
const char *rust_config_get_xor_key(void);

/**
 * Get start position point (returns by value since Point is #[repr(C)])
 */
struct Point rust_config_get_start_point(void);

/**
 * Get server ID
 */
int rust_config_get_server_id(void);

/**
 * Get number of meta files
 */
int rust_config_get_meta_count(void);

/**
 * Get meta file name by index
 * Returns null if index is out of bounds
 */
const char *rust_config_get_meta_file(int index);

/**
 * Get number of towns
 */
int rust_config_get_town_count(void);

/**
 * Get town name by index
 */
const char *rust_config_get_town_name(int index);

/**
 * Free a string returned by Rust
 * Must be called on all strings returned by rust_config_get_* functions
 *
 * # Safety
 * - `ptr` must be a pointer returned by a rust_config_get_* function
 * - Must only be called once per pointer
 */
void rust_config_free_string(char *ptr);

/**
 * Populate C global variables from Rust config
 * Call this after rust_config_read() to populate the legacy C globals
 *
 * # Safety
 * C global variables must be accessible and have sufficient buffer space
 */
void rust_config_populate_c_globals(void);

/**
 * Initialize the global server state
 * This should be called once at server startup
 */
void rust_core_init(void);

/**
 * Clean up the global server state
 * This should be called at server shutdown
 */
void rust_core_cleanup(void);

/**
 * Set the termination function callback
 * This replaces set_termfunc() from core.c
 *
 * # Safety
 * The callback function pointer must be valid for the lifetime of the server
 */
void rust_set_termfunc(struct Option_CTermFunc func);

/**
 * Handle a signal (called from C signal handlers)
 * This replaces handle_signal() from core.c
 *
 * # Safety
 * Should only be called from signal handlers
 */
void rust_handle_signal(int signum);

/**
 * Check if server shutdown has been requested
 * Returns 1 if shutdown requested, 0 otherwise
 */
int rust_should_shutdown(void);

/**
 * Get the server tick rate in nanoseconds
 */
uint64_t rust_get_tick_rate_ns(void);

/**
 * Legacy hash generation function (to be replaced)
 */
void rust_generate_hashvalues(const char *name, char *_buffer);

#endif  /* YURI_RS_H */
